<!doctype html>
<html lang="bn">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>eProstutiBD ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï ‚Äî Details</title>

  <!-- ‚úÖ SEO -->
  <meta name="description" content="‡¶¨‡¶ø‡¶∑‡ßü‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶ï MCQ, Written ‡¶è‡¶¨‡¶Ç Subject Model Test‡•§ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶´‡ßç‡¶∞‡¶ø ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï ‚Äî eProstutiBD" />
  <meta name="keywords" content="‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡¶¨‡ßç‡¶Ø‡¶æ‡¶Ç‡¶ï, MCQ, Written, Model Test, eProstutiBD, Admission, BCS, IELTS" />
  <meta name="robots" content="index,follow" />
  <meta name="theme-color" content="#1d4ed8" />
  <link rel="canonical" href="#" />

  <style>
    :root{
      --bg1:#f6f8ff; --bg2:#eef6ff;
      --line: rgba(18, 28, 55, .10);
      --text:#0f1730; --muted:#5a6685;

      --shadow: 0 16px 44px rgba(15,23,48,.12);
      --shadow2: 0 10px 26px rgba(15,23,48,.08);

      --brandA:#1d4ed8;
      --brandB:#0ea5e9;

      --ok:#16a34a;
      --danger:#dc2626;

      --footerA:#0b1b45;
      --footerB:#071635;

      --safeBottom: env(safe-area-inset-bottom, 0px);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans Bengali", sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 600px at 10% 10%, rgba(29,78,216,.12), transparent 55%),
        radial-gradient(800px 560px at 92% 14%, rgba(14,165,233,.10), transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      min-height:100vh;
    }
    a{color:inherit}

    .container{
      max-width: 1320px;
      margin: 0 auto;
      padding-left: clamp(12px, 4vw, 48px);
      padding-right: clamp(12px, 4vw, 48px);
      padding-top: 10px;
      padding-bottom: calc(88px + var(--safeBottom)); /* ‚úÖ bottom sticky bar space */
    }

    /* ===== Header (same style) ===== */
    header{
      position:sticky; top:0; z-index:50;
      background: linear-gradient(135deg, rgba(29,78,216,.96), rgba(14,165,233,.92));
      border-bottom: 1px solid rgba(255,255,255,.22);
      box-shadow: 0 14px 34px rgba(29,78,216,.18);
    }
    .topbar{
      max-width: 1320px;
      margin:0 auto;
      padding-left: clamp(12px, 4vw, 48px);
      padding-right: clamp(12px, 4vw, 48px);
      padding-top: 10px;
      padding-bottom: 10px;
      display:flex;
      align-items:center;
      gap:10px;
    }
    .brand{display:flex;flex-direction:column;gap:3px;flex:0 0 auto;min-width:0;}
    .brand .name{color:#fff;font-weight:1000;letter-spacing:.2px;font-size:15px;line-height:1;white-space:nowrap;}
    .brand .tag{color:rgba(255,255,255,.88);font-size:12px;line-height:1.1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width: 260px;}

    .nav{
      display:flex;gap:8px;overflow:auto;-webkit-overflow-scrolling: touch;scrollbar-width:none;padding-bottom:2px;flex:1;
    }
    .nav::-webkit-scrollbar{display:none}
    .nav a{
      flex:0 0 auto;text-decoration:none;color:#fff;font-size:12px;font-weight:1000;
      padding:8px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.10);white-space:nowrap;transition:.15s;
    }
    .nav a:hover{background: rgba(255,255,255,.16)}
    .nav a.active{background: rgba(255,255,255,.22); border-color: rgba(255,255,255,.26)}

    .menuBtn{
      flex:0 0 auto;margin-left:auto;display:none;
      border:1px solid rgba(255,255,255,.22);background: rgba(255,255,255,.14);color:#fff;
      border-radius: 12px;padding: 8px 10px;font-weight:1000;font-size:12px;cursor:pointer;line-height:1;
    }
    @media (max-width: 860px){
      .nav{display:none;}
      .menuBtn{display:inline-flex;align-items:center;gap:8px;}
      .brand .tag{max-width: 55vw;}
    }

    /* ===== Mobile Menu ===== */
    .mobileMenu{display:none;position: fixed;inset: 0;z-index: 9999;}
    .mobileMenu .overlay{position:absolute;inset:0;background: transparent;}
    .mobileMenu .drawer{
      position:absolute;top: 64px;right: 12px;width: min(320px, calc(100vw - 24px));
      border-radius: 16px;padding: 10px;border: 1px solid rgba(255,255,255,.28);
      background: rgba(8, 20, 55, .78);backdrop-filter: blur(12px);-webkit-backdrop-filter: blur(12px);
      box-shadow: 0 18px 38px rgba(0,0,0,.35);
    }
    .mobileMenu a{
      display:block;text-decoration:none;color:#fff;font-weight:1000;font-size:13px;padding: 12px 12px;border-radius: 12px;
      border: 1px solid rgba(255,255,255,.16);background: rgba(255,255,255,.06);margin-bottom: 8px;white-space:nowrap;
    }
    .mobileMenu a.active{border-color: rgba(255,255,255,.28);background: rgba(255,255,255,.12);}

    /* ===== Notice + Header Ad ===== */
    .noticeBar{
      margin-top: 10px;border: 1px solid var(--line);background: rgba(255,255,255,.72);
      border-radius: 16px;overflow:hidden;box-shadow: var(--shadow2);
    }
    .noticeRow{display:flex;align-items:center;gap:10px;padding: 10px 12px;}
    .noticeTag{
      flex:0 0 auto;font-size:12px;font-weight:1000;padding: 6px 10px;border-radius: 999px;
      background: rgba(29,78,216,.10);border: 1px solid rgba(29,78,216,.18);color: var(--text);white-space:nowrap;
    }
    .marq{flex:1;overflow:hidden;white-space:nowrap;color: var(--muted);font-size:12px;}
    .marq span{display:inline-block;padding-left: 100%;animation: ticker 18s linear infinite;}
    @keyframes ticker{0%{transform: translateX(0)}100%{transform: translateX(-100%)}}

    .adBox{
      margin-top: 10px;border: 1px dashed rgba(18,28,55,.22);border-radius: 16px;
      background: rgba(255,255,255,.72);box-shadow: var(--shadow2);overflow:hidden;
    }
    .adHead{
      padding: 10px 12px;border-bottom: 1px solid rgba(18,28,55,.10);
      display:flex;align-items:center;justify-content:space-between;gap:10px;font-size:12px;color: var(--muted);
    }
    .adHead b{color: var(--text)}
    .adBody{min-height: 100px;display:grid;place-items:center;padding: 10px;text-align:center;color: var(--muted);}

    /* ===== Main layout ===== */
    .grid{
      display:grid;
      grid-template-columns: 330px 1fr;
      gap: 10px;
      align-items:start;
      margin-top: 12px;
    }
    @media (max-width: 980px){ .grid{grid-template-columns: 1fr;} }

    .panel{
      border: 1px solid var(--line);
      border-radius: 20px;
      background: rgba(255,255,255,.70);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .panelHead{
      padding: 12px 14px;border-bottom: 1px solid rgba(18,28,55,.10);
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .panelHead b{font-size:14px}
    .panelHead .muted{font-size:12px;color:var(--muted)}
    .panelBody{padding: 12px 14px}

    .divider{height:1px;background: rgba(18,28,55,.10);margin: 12px 0;}

    .btn{
      border:1px solid rgba(18,28,55,.12);
      background: rgba(255,255,255,.86);
      color: var(--text);
      border-radius: 14px;
      padding: 8px 10px;
      height: 36px;
      font-size:12px;
      font-weight:1000;
      cursor:pointer;
      white-space:nowrap;
      box-shadow: 0 10px 22px rgba(15,23,48,.05);
      transition:.15s;
    }
    .btn.primary{border-color: rgba(29,78,216,.22);background: rgba(29,78,216,.10);}

    .searchMini{display:flex;gap:8px;align-items:center;flex-wrap:nowrap;}
    .searchMini input{
      width: 100%;
      border:1px solid rgba(18,28,55,.12);
      background: rgba(255,255,255,.86);
      color: var(--text);
      padding: 9px 10px;
      border-radius: 14px;
      outline:none;
      box-shadow: 0 10px 22px rgba(15,23,48,.05);
      font-size: 13px;
    }

    /* ‚úÖ Subject List better + scrollable section */
    .leftWrap{
      position: sticky;
      top: 72px;
      height: calc(100vh - 92px);
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    @media (max-width: 980px){
      .leftWrap{position: static; height:auto;}
    }

    .sList{
      display:flex;flex-direction:column;gap:10px;
      overflow:auto;
      -webkit-overflow-scrolling: touch;
      padding-right: 4px;
      flex:1;
      min-height: 220px;
    }
    .sItem{
      border: 1px solid rgba(18,28,55,.10);
      background: rgba(255,255,255,.92);
      border-radius: 18px;
      padding: 12px;
      cursor:pointer;
      transition:.15s;
      box-shadow: 0 12px 26px rgba(15,23,48,.06);
      position:relative;
      overflow:hidden;
    }
    .sItem::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(560px 140px at 20% 0%, rgba(29,78,216,.10), transparent 55%),
        radial-gradient(560px 140px at 100% 0%, rgba(14,165,233,.10), transparent 55%);
      opacity:.9; pointer-events:none;
    }
    .sItem b{
      position:relative;
      display:block;
      font-size:14px;
      font-weight:1000;
      line-height:1.2;
      margin-bottom:8px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .chips{position:relative;display:flex;gap:8px;flex-wrap:wrap;align-items:center;}
    .chip{
      font-size:12px;padding: 6px 9px;border-radius:999px;
      border: 1px solid rgba(18,28,55,.12);
      background: rgba(255,255,255,.78);
      color: var(--muted);
      white-space: nowrap;
    }
    .chip b{color: var(--text)}
    .sItem.active{
      outline: 2px solid rgba(29,78,216,.22);
      border-color: rgba(29,78,216,.22);
    }

    /* ‚úÖ Tabs below Ads + sticky while scroll */
    .stickyTabs{
      position: sticky;
      top: 0;
      z-index: 12;
      background: rgba(246,248,255,.72);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(18,28,55,.08);
      padding: 10px 0 8px;
      margin: -6px 0 10px;
    }
    .tabs{
      display:flex;
      gap:8px;
      justify-content:flex-start;
      flex-wrap:wrap;
    }
    .tab{
      border:1px solid rgba(18,28,55,.12);
      background: rgba(255,255,255,.86);
      color: var(--text);
      border-radius: 999px;
      padding: 8px 10px;
      font-size:12px;
      font-weight:1000;
      cursor:pointer;
      box-shadow: 0 10px 22px rgba(15,23,48,.05);
      transition:.15s;
      height: 36px;
    }
    .tab.active{
      border-color: rgba(29,78,216,.28);
      background: rgba(29,78,216,.10);
    }

    /* ‚úÖ Question paper style */
    .paper{
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(18,28,55,.10);
      border-radius: 18px;
      box-shadow: 0 12px 26px rgba(15,23,48,.06);
      padding: 12px;
    }
    .qList{display:flex; flex-direction:column; gap:10px;}
    .qCard{
      border: 1px dashed rgba(18,28,55,.18);
      background: rgba(255,255,255,.94);
      border-radius: 14px;
      padding: 10px 10px;
    }
    .qHead{display:flex; gap:10px; align-items:flex-start; justify-content:space-between}
    .qNo{
      flex:0 0 auto;
      font-size:11px;
      font-weight:1000;
      padding: 5px 8px;
      border-radius:999px;
      border: 1px solid rgba(18,28,55,.12);
      background: rgba(255,255,255,.78);
      color: var(--muted);
      white-space:nowrap;
    }
    .qText{
      margin:0;
      font-weight:700;
      font-size:12.5px;       /* ‚úÖ small paper font */
      line-height:1.55;
      flex:1;
      letter-spacing: .1px;
    }

    .opts{margin-top: 8px; display:grid; grid-template-columns: 1fr 1fr; gap:8px;}
    @media (max-width: 560px){ .opts{grid-template-columns:1fr;} }

    .opt{
      border: 1px solid rgba(18,28,55,.14);
      background: rgba(255,255,255,.84);
      border-radius: 12px;
      padding: 8px 10px;
      cursor:pointer;
      display:flex;
      gap:8px;
      align-items:flex-start;
      transition:.12s;
    }
    .opt:hover{transform: translateY(-1px)}
    .badge{
      width: 22px; height: 22px;
      border-radius: 999px;
      border: 1px solid rgba(18,28,55,.12);
      display:grid; place-items:center;
      font-weight:1000;
      color: var(--muted);
      background: rgba(255,255,255,.95);
      flex:0 0 auto;
      font-size:11px;
    }
    .opt .txt{flex:1; font-size:12px; line-height:1.55; color: var(--text)}
    .opt.correct{border-color: rgba(22,163,74,.28); background: rgba(22,163,74,.10);}
    .opt.wrong{border-color: rgba(220,38,38,.28); background: rgba(220,38,38,.10);}

    .ansBox{
      margin-top: 8px;
      border: 1px solid rgba(18,28,55,.12);
      background: rgba(255,255,255,.78);
      border-radius: 12px;
      padding: 8px 10px;
      color: var(--muted);
      font-size:11.5px;
      line-height:1.6;
    }
    .ansBox b{color: var(--text)}
    .ansHidden{
      margin-top: 8px;
      border: 1px dashed rgba(18,28,55,.22);
      background: rgba(255,255,255,.70);
      border-radius: 12px;
      padding: 8px 10px;
      color: var(--muted);
      font-size:11.5px;
    }

    /* ===== Model test new design ===== */
    .mtGrid{
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
    }
    @media (max-width: 560px){ .mtGrid{grid-template-columns: 1fr;} }

    .mtCard{
      border: 1px solid rgba(18,28,55,.10);
      background: rgba(255,255,255,.94);
      border-radius: 18px;
      padding: 12px;
      box-shadow: 0 10px 22px rgba(15,23,48,.05);
      position:relative;
      overflow:hidden;
    }
    .mtCard::before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(560px 140px at 10% 0%, rgba(29,78,216,.10), transparent 60%),
        radial-gradient(560px 140px at 100% 0%, rgba(34,197,94,.10), transparent 60%);
      opacity:.85;
      pointer-events:none;
    }
    .mtCard h4{
      position:relative;
      margin:0;
      font-size:13px;
      font-weight:1000;
      line-height:1.25;
      margin-bottom: 10px;
      display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;
      min-height: 34px;
    }
    .mtMeta{
      position:relative;
      display:flex; gap:8px; flex-wrap:wrap;
      color: var(--muted);
      font-size:12px;
      margin-bottom:10px;
    }
    .mtMeta span{
      border:1px solid rgba(18,28,55,.10);
      background: rgba(255,255,255,.80);
      border-radius: 999px;
      padding: 6px 10px;
    }
    .mtActions{position:relative; display:flex; gap:8px; flex-wrap:wrap}

    /* ===== Pager ===== */
    .pager{
      margin-top: 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .pager .info{font-size:12px;color:var(--muted)}

    .inlineAd{
      border: 1px dashed rgba(18,28,55,.22);
      background: rgba(255,255,255,.78);
      border-radius: 18px;
      padding: 12px;
      min-height: 90px;
      display:grid;
      place-items:center;
      text-align:center;
      color: var(--muted);
      box-shadow: 0 10px 22px rgba(15,23,48,.04);
    }
    .inlineAd .tag{
      display:inline-block;font-weight:1000;color: var(--text);
      padding: 6px 10px;border-radius:999px;border:1px solid rgba(18,28,55,.12);
      background: rgba(255,255,255,.86);margin-bottom: 6px;font-size:12px;
    }

    .empty{
      display:none;
      border:1px dashed rgba(18,28,55,.22);
      background: rgba(255,255,255,.70);
      border-radius: 16px;
      padding: 12px;
      color: var(--muted);
      margin-top: 12px;
      font-size:12px;
    }

    .skeleton{
      border: 1px solid rgba(18,28,55,.10);
      background: rgba(255,255,255,.78);
      border-radius: 18px;
      padding: 12px;
      min-height: 100px;
      position: relative;
      overflow:hidden;
      box-shadow: 0 10px 22px rgba(15,23,48,.04);
    }
    .shimmer{
      position:absolute; inset:0;
      background: linear-gradient(110deg, transparent 0%, rgba(0,0,0,.04) 20%, transparent 40%);
      transform: translateX(-100%);
      animation: sh 1.15s infinite;
    }
    @keyframes sh{to{transform: translateX(100%)}}

    /* ‚úÖ Sticky bottom answer bar (always visible) */
    .bottomBar{
      position: fixed;
      left: 0; right: 0;
      bottom: 0;
      z-index: 999;
      padding: 10px 12px calc(10px + var(--safeBottom));
      background: rgba(255,255,255,.78);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-top: 1px solid rgba(18,28,55,.10);
      box-shadow: 0 -16px 40px rgba(15,23,48,.10);
    }
    .bottomInner{
      max-width: 1320px;
      margin: 0 auto;
      padding-left: clamp(12px, 4vw, 48px);
      padding-right: clamp(12px, 4vw, 48px);
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .toggles{
      display:flex; gap:8px; flex-wrap:wrap; align-items:center;
    }
    .toggle{
      border:1px solid rgba(18,28,55,.12);
      background: rgba(255,255,255,.86);
      color: var(--text);
      border-radius: 999px;
      padding: 8px 10px;
      font-size:12px;
      font-weight:1000;
      cursor:pointer;
      box-shadow: 0 10px 22px rgba(15,23,48,.05);
      height: 36px;
      transition:.15s;
    }
    .toggle.active{
      border-color: rgba(22,163,74,.22);
      background: rgba(22,163,74,.10);
    }
    .hintSmall{font-size:12px;color:var(--muted);}

    /* ===== Footer (same style) ===== */
    footer{
      margin-top: 14px;
      border-top: 1px solid rgba(255,255,255,.18);
      background:
        radial-gradient(700px 240px at 20% 0%, rgba(96,165,250,.20), transparent 60%),
        radial-gradient(700px 240px at 80% 0%, rgba(34,197,94,.16), transparent 60%),
        linear-gradient(180deg, var(--footerA), var(--footerB));
      color: rgba(255,255,255,.92);
    }
    .foot{
      max-width: 1320px;
      margin:0 auto;
      padding-left: clamp(12px, 4vw, 48px);
      padding-right: clamp(12px, 4vw, 48px);
      padding-top: 16px;
      padding-bottom: 10px;
      display:grid;
      grid-template-columns: 1.1fr 1fr 1fr 1fr;
      gap: 14px;
      align-items:start;
    }
    @media (max-width: 560px){
      .foot{grid-template-columns: 1fr 1fr; gap: 12px;}
      .footLogo{grid-column: 1 / -1;}
      .footFollow{grid-column: 1 / -1;}
    }
    .foot b{font-size:13px}
    .foot a{display:block;text-decoration:none;color: rgba(255,255,255,.78);font-size:12px;padding: 6px 0;}
    .foot a:hover{color:#fff}
    .footBrand{display:flex; flex-direction:column; gap:3px;}
    .footBrand .name{color:#fff;font-weight:1000;letter-spacing:.2px;font-size:15px;line-height:1;white-space:nowrap;}
    .footBrand .tag{color:rgba(255,255,255,.78);font-size:12px;line-height:1.1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width: 320px;}
    .copy{
      max-width: 1320px;
      margin:0 auto;
      padding-left: clamp(12px, 4vw, 48px);
      padding-right: clamp(12px, 4vw, 48px);
      padding-bottom: 14px;
      color: rgba(255,255,255,.72);
      font-size:12px;
      text-align:center;
      white-space:nowrap;
    }
  </style>
</head>

<body>
  <header>
    <div class="topbar">
      <div class="brand">
        <div class="name">eProstutiBD</div>
        <div class="tag" id="headerTag">‡¶∏‡¶ï‡¶≤ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶ø ‡¶π‡ßã‡¶ï ‡¶ó‡¶≠‡ßÄ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá</div>
      </div>

      <nav class="nav" aria-label="Main navigation">
        <a href="#">‡¶è‡¶ï‡¶æ‡¶°‡ßá‡¶Æ‡ßÄ</a>
        <a class="active" href="#">‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ô‡ßç‡¶ï</a>
        <a href="#">‡¶è‡¶°‡¶Æ‡¶ø‡¶∂‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü</a>
        <a href="#">‡¶ú‡¶¨ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü</a>
        <a href="#">‡¶Æ‡¶°‡ßá‡¶≤ ‡¶ü‡ßá‡¶∏‡ßç‡¶ü</a>
        <a href="#">‡¶ï‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶´‡ßá‡ßü‡¶æ‡¶∞‡ßç‡¶∏</a>
        <a href="#">IELTS</a>
        <a href="#">BCS</a>
        <a href="#">‡¶®‡ßã‡¶ü‡¶ø‡¶∂</a>
        <a href="#">‡¶¨‡ßç‡¶≤‡¶ó</a>
        <a href="#">‡¶ï‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡ßü‡¶æ‡¶∞</a>
      </nav>

      <button class="menuBtn" id="menuBtn" aria-expanded="false" aria-controls="mobileMenu" onclick="toggleMenu()">‚ò∞</button>
    </div>

    <div class="mobileMenu" id="mobileMenu">
      <div class="overlay" onclick="closeMenu()"></div>
      <div class="drawer" role="dialog" aria-label="Menu" onclick="event.stopPropagation()">
        <a href="#">‡¶è‡¶ï‡¶æ‡¶°‡ßá‡¶Æ‡ßÄ</a>
        <a class="active" href="#">‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶ô‡ßç‡¶ï</a>
        <a href="#">‡¶è‡¶°‡¶Æ‡¶ø‡¶∂‡¶® ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü</a>
        <a href="#">‡¶ú‡¶¨ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶ü</a>
        <a href="#">‡¶Æ‡¶°‡ßá‡¶≤ ‡¶ü‡ßá‡¶∏‡ßç‡¶ü</a>
        <a href="#">‡¶ï‡¶æ‡¶∞‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶´‡ßá‡ßü‡¶æ‡¶∞‡ßç‡¶∏</a>
        <a href="#">IELTS</a>
        <a href="#">BCS</a>
        <a href="#">‡¶®‡ßã‡¶ü‡¶ø‡¶∂</a>
        <a href="#">‡¶¨‡ßç‡¶≤‡¶ó</a>
        <a href="#">‡¶ï‡ßç‡¶Ø‡¶æ‡¶∞‡¶ø‡ßü‡¶æ‡¶∞</a>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="noticeBar" role="region" aria-label="Notice">
      <div class="noticeRow">
        <span class="noticeTag">Details</span>
        <div class="marq">
          <span id="tickerText">Subject ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® ‚Ä¢ MCQ/Written/Model Test ‡¶¶‡ßá‡¶ñ‡¶§‡ßá Tab ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶® ‚Ä¢ Ans Hide ‡¶Æ‡ßã‡¶°‡ßá MCQ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶≤‡ßá Correct/Wrong ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá</span>
        </div>
      </div>
    </div>

    <div class="adBox">
      <div class="adHead">
        <b>Ad Slot</b>
        <span>Header ‡¶®‡¶ø‡¶ö‡ßá ‚Ä¢ Responsive</span>
      </div>
      <div class="adBody">
        <div>
          <div style="font-weight:1000;color:var(--text);margin-bottom:6px;">Responsive Ad</div>
          <div style="font-size:12px;color:var(--muted)">Paste ad code here</div>
        </div>
      </div>
    </div>

    <main class="grid">
      <!-- LEFT: Subject List -->
      <aside class="panel">
        <div class="panelHead">
          <b>‡¶∏‡¶ï‡¶≤ Subject</b>
          <span class="muted" id="leftHint">Loading‚Ä¶</span>
        </div>

        <div class="panelBody leftWrap">
          <div class="searchMini">
            <input id="sSearch" placeholder="Search subject‚Ä¶" oninput="renderSubjectList()" />
            <button class="btn" onclick="renderSubjectList()">Search</button>
          </div>

          <div class="divider"></div>

          <div id="sList" class="sList" aria-live="polite"></div>
          <div id="sEmpty" class="empty">‡¶ï‡ßã‡¶®‡ßã Subject ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§</div>

          <div class="inlineAd">
            <div>
              <div class="tag">Ad Slot</div>
              <div style="font-size:12px;">‡¶è‡¶ñ‡¶æ‡¶®‡ßá AdSense/Adstra ‡¶ï‡ßã‡¶° ‡¶¨‡¶∏‡¶¨‡ßá</div>
            </div>
          </div>
        </div>
      </aside>

      <!-- RIGHT: Content -->
      <section class="panel">
        <div class="panelHead">
          <div style="min-width:0">
            <b id="rightTitle">Details</b>
            <div class="muted" id="rightHint" style="margin-top:2px;">Left ‡¶•‡ßá‡¶ï‡ßá Subject select ‡¶ï‡¶∞‡ßÅ‡¶®</div>
          </div>

          <div class="searchMini" style="max-width:420px; width:100%">
            <input id="qSearch" placeholder="Search question‚Ä¶" oninput="resetAndReload(true)" />
            <button class="btn" onclick="resetAndReload(true)">Search</button>
          </div>
        </div>

        <div class="panelBody">
          <!-- ‚úÖ Tabs below ads, sticky -->
          <div class="stickyTabs" aria-label="Tabs">
            <div class="tabs">
              <button class="tab active" id="tabMcq" onclick="setMode('mcq')">MCQ</button>
              <button class="tab" id="tabWritten" onclick="setMode('written')">Written</button>
              <button class="tab" id="tabModel" onclick="setMode('model')">‡¶Æ‡¶°‡ßá‡¶≤ ‡¶ü‡ßá‡¶∏‡ßç‡¶ü</button>
            </div>
          </div>

          <div class="inlineAd" style="margin-bottom:12px;">
            <div>
              <div class="tag">Ad Slot</div>
              <div style="font-size:12px;">‡¶è‡¶ñ‡¶æ‡¶®‡ßá AdSense/Adstra ‡¶ï‡ßã‡¶° ‡¶¨‡¶∏‡¶¨‡ßá</div>
            </div>
          </div>

          <div id="content"></div>
          <div id="emptyRight" class="empty">‡¶ï‡ßã‡¶®‡ßã ‡¶°‡¶æ‡¶ü‡¶æ ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø‡•§</div>

          <div class="pager" id="pager" style="display:none">
            <div class="info" id="pageInfo">Page 1</div>
            <div style="display:flex; gap:8px; flex-wrap:wrap;">
              <button class="btn" id="prevBtn" onclick="prevPage()">Prev</button>
              <button class="btn primary" id="nextBtn" onclick="nextPage()">Next</button>
            </div>
          </div>

          <div style="margin-top:10px; font-size:12px; color:var(--muted);">
            ‚úÖ ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶™‡ßá‡¶ú‡ßá ‡¶∏‡¶∞‡ßç‡¶¨‡ßã‡¶ö‡ßç‡¶ö <b>‡ß©‡ß¶</b>‡¶ü‡¶ø ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡ßü‡•§
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- ‚úÖ Bottom sticky answer controls -->
  <div class="bottomBar" id="bottomBar">
    <div class="bottomInner">
      <div class="toggles" id="ansGroup">
        <button class="toggle active" id="ansHideBtn" onclick="setAnsMode('hide')">Ans Hide</button>
        <button class="toggle" id="ansShowBtn" onclick="setAnsMode('show')">Ans Show</button>
      </div>
      <div class="hintSmall" id="bottomHint">Ans Hide ON ‚Äî MCQ ‡¶§‡ßá ‡¶Ö‡¶™‡¶∂‡¶® ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶≤‡ßá ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá</div>
    </div>
  </div>

  <footer>
    <div class="foot">
      <div class="footLogo">
        <div class="footBrand">
          <div class="name">eProstutiBD</div>
          <div class="tag">‡¶∏‡¶ï‡¶≤ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶ø ‡¶π‡ßã‡¶ï ‡¶ó‡¶≠‡ßÄ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá</div>
        </div>
      </div>

      <div>
        <b>‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞‡¶ø ‡¶™‡ßá‡¶ú</b>
        <a href="#">About</a>
        <a href="#">Privacy Policy</a>
        <a href="#">Terms</a>
        <a href="#">Contact</a>
      </div>

      <div>
        <b>‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</b>
        <a href="#">Notice</a>
        <a href="#">Blog</a>
        <a href="#">Career</a>
        <a href="#">Help</a>
      </div>

      <div>
        <b>Follow</b>
        <div style="font-size:12px;color:rgba(255,255,255,.78);padding-top:8px;">
          Social links ‡¶™‡¶∞‡ßá ‡¶¨‡¶∏‡¶æ‡¶¨‡ßá‡¶® ‚úÖ
        </div>
      </div>
    </div>
    <div class="copy">¬© <span id="year"></span> eProstutiBD All rights reserved</div>
  </footer>

  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-firestore-compat.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBUBwLuNDSJF1xrkUVTTOXs76f_o4YkBiI",
      authDomain: "eprostutibd-webapp.firebaseapp.com",
      projectId: "eprostutibd-webapp",
      storageBucket: "eprostutibd-webapp.firebasestorage.app",
      messagingSenderId: "1044069942330",
      appId: "1:1044069942330:web:b3fc6c8b75d7b80686a103",
      measurementId: "G-T2G55NMDQT"
    };

    const COL_SUBJECTS = "subjects";
    const COL_SUBJECT_QUESTIONS = "subject_questions";
    const COL_SUBJECT_MODEL_TESTS = "subject_model_tests";

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const $ = (id)=>document.getElementById(id);

    function openMenu(){ $("mobileMenu").style.display="block"; $("menuBtn").setAttribute("aria-expanded","true"); }
    function closeMenu(){ $("mobileMenu").style.display="none"; $("menuBtn").setAttribute("aria-expanded","false"); }
    function toggleMenu(){ const m=$("mobileMenu"); (m.style.display==="block")?closeMenu():openMenu(); }
    window.openMenu=openMenu; window.closeMenu=closeMenu; window.toggleMenu=toggleMenu;
    document.addEventListener("keydown",(e)=>{ if(e.key==="Escape") closeMenu(); });

    $("year").textContent = new Date().getFullYear();

    function esc(str){
      return String(str ?? "").replace(/[&<>"']/g, (m)=>({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;" }[m]));
    }
    function normalize(s){
      return String(s||"").toLowerCase()
        .replace(/[^\p{L}\p{N}\s]+/gu, " ")
        .replace(/\s+/g, " ")
        .trim();
    }

    function getOptions(doc){
      if(Array.isArray(doc.options) && doc.options.length) return doc.options.slice(0,4);
      return [doc.option1, doc.option2, doc.option3, doc.option4].map(x => (x ?? "").toString());
    }

    function getCorrectIndex(doc, opts){
      if(Number.isFinite(doc.correctIndex)) return doc.correctIndex;
      const ra = (doc.rightAns ?? doc.right_ans ?? doc.answer ?? "").toString().trim();
      if(!ra) return -1;
      const map = { a:0, b:1, c:2, d:3 };
      const low = ra.toLowerCase();
      if(map[low] !== undefined) return map[low];
      const nra = normalize(ra);
      for(let i=0;i<opts.length;i++){
        if(normalize(opts[i]) === nra) return i;
      }
      return -1;
    }

    function renderSkeleton(targetId, count=3){
      const wrap = $(targetId);
      wrap.innerHTML = "";
      for(let i=0;i<count;i++){
        const d = document.createElement("div");
        d.className = "skeleton";
        d.innerHTML = `<div class="shimmer"></div>`;
        wrap.appendChild(d);
      }
    }

    // ===== State =====
    let SUBJECTS = [];
    let selectedSubjectId = "";
    let selectedSubjectName = "";

    let mode = "mcq";
    let ansMode = "hide";

    const PAGE_SIZE = 30;
    let pageIndex = 1;
    let cursors = [null];
    let lastDocThisPage = null;
    let hasNext = false;

    let unsubSubjects = null;
    let unsubPage = null;

    let currentItems = [];
    let selectedOptionMap = new Map();

    function getParam(name){
      const u = new URL(location.href);
      return u.searchParams.get(name) || "";
    }
    selectedSubjectId = getParam("subjectId");

    function renderSubjectList(){
      const q = normalize($("sSearch").value || "");
      const list = $("sList");
      list.innerHTML = "";

      const filtered = SUBJECTS
        .filter(s => !q ? true : normalize(s.name||"").includes(q))
        .sort((a,b)=> (a.name||"").localeCompare(b.name||""));

      $("leftHint").textContent = `Total: ${SUBJECTS.length} ‚Ä¢ Showing: ${filtered.length}`;
      $("sEmpty").style.display = filtered.length ? "none" : "block";

      filtered.forEach(s=>{
        const mcq = s.counts?.mcq || 0;
        const written = s.counts?.written || 0;

        const el = document.createElement("div");
        el.className = "sItem" + (s.id === selectedSubjectId ? " active" : "");
        el.onclick = ()=> selectSubject(s.id);

        el.innerHTML = `
          <b title="${esc(s.name||"")}">${esc(s.name||"(no name)")}</b>
          <div class="chips">
            <span class="chip">MCQ <b>${mcq}</b></span>
            <span class="chip">Written <b>${written}</b></span>
          </div>
        `;
        list.appendChild(el);
      });
    }
    window.renderSubjectList = renderSubjectList;

    function selectSubject(id){
      selectedSubjectId = id;

      const u = new URL(location.href);
      u.searchParams.set("subjectId", id);
      history.replaceState({}, "", u.toString());

      const found = SUBJECTS.find(s=>s.id===id);
      selectedSubjectName = found?.name || "";
      $("rightTitle").textContent = selectedSubjectName || "Details";
      $("headerTag").textContent = selectedSubjectName ? `‡¶∏‡¶ï‡¶≤ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶ø ‡¶π‡ßã‡¶ï ‡¶ó‡¶≠‡ßÄ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‚Ä¢ ${selectedSubjectName}` : "‡¶∏‡¶ï‡¶≤ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶ø ‡¶π‡ßã‡¶ï ‡¶ó‡¶≠‡ßÄ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá";
      $("tickerText").textContent = selectedSubjectName
        ? `${selectedSubjectName} ‚Ä¢ MCQ/Written/Model Test ‡¶¶‡ßá‡¶ñ‡¶§‡ßá Tab ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶® ‚Ä¢ Ans Hide ‡¶Æ‡ßã‡¶°‡ßá MCQ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶≤‡ßá Correct/Wrong ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá`
        : "Subject ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® ‚Ä¢ MCQ/Written/Model Test ‡¶¶‡ßá‡¶ñ‡¶§‡ßá Tab ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®";

      renderSubjectList();
      resetAndReload(false);
    }

    function setMode(m){
      mode = m;
      $("tabMcq").classList.toggle("active", mode==="mcq");
      $("tabWritten").classList.toggle("active", mode==="written");
      $("tabModel").classList.toggle("active", mode==="model");

      // bottom bar visibility
      const showAns = (mode === "mcq" || mode === "written");
      $("ansGroup").style.display = showAns ? "flex" : "none";
      $("bottomBar").style.display = showAns ? "block" : "none";

      $("bottomHint").textContent = (mode==="mcq")
        ? "Ans Hide ON ‚Äî MCQ ‡¶§‡ßá ‡¶Ö‡¶™‡¶∂‡¶® ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶≤‡ßá ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá"
        : "Ans Hide ON ‚Äî Written answer ‡¶¶‡ßá‡¶ñ‡¶§‡ßá Ans Show ‡¶ï‡¶∞‡ßÅ‡¶®";

      resetAndReload(false);
    }
    window.setMode = setMode;

    function setAnsMode(m){
      ansMode = m;
      $("ansHideBtn").classList.toggle("active", ansMode==="hide");
      $("ansShowBtn").classList.toggle("active", ansMode==="show");
      renderContent();
    }
    window.setAnsMode = setAnsMode;

    function resetPaging(){
      pageIndex = 1;
      cursors = [null];
      lastDocThisPage = null;
      hasNext = false;
      currentItems = [];
      selectedOptionMap.clear();
    }
    function updatePager(){
      $("pager").style.display = "flex";
      $("pageInfo").textContent = `Page ${pageIndex} ‚Ä¢ Showing ${currentItems.length} (max ${PAGE_SIZE})`;
      $("prevBtn").disabled = pageIndex <= 1;
      $("nextBtn").disabled = !hasNext;
    }
    function prevPage(){
      if(pageIndex <= 1) return;
      pageIndex -= 1;
      selectedOptionMap.clear();
      loadPage();
    }
    function nextPage(){
      if(!hasNext) return;
      if(lastDocThisPage) cursors[pageIndex] = lastDocThisPage;
      pageIndex += 1;
      selectedOptionMap.clear();
      loadPage();
    }
    window.prevPage = prevPage;
    window.nextPage = nextPage;

    function detachPage(){ if(unsubPage){ try{unsubPage();}catch(e){} unsubPage=null; } }

    function resetAndReload(keepPage){
      if(!selectedSubjectId){
        $("rightHint").textContent = "Left ‡¶•‡ßá‡¶ï‡ßá Subject select ‡¶ï‡¶∞‡ßÅ‡¶®";
        $("content").innerHTML = "";
        $("emptyRight").style.display = "block";
        $("pager").style.display = "none";
        return;
      }
      if(!keepPage) resetPaging();
      loadPage();
    }
    window.resetAndReload = resetAndReload;

    function buildQuery(){
      const cursor = cursors[pageIndex-1];
      const searchText = normalize($("qSearch").value || "");

      if(mode === "model"){
        let q = db.collection(COL_SUBJECT_MODEL_TESTS)
          .where("subjectId","==", selectedSubjectId)
          .orderBy("createdAt","desc")
          .limit(PAGE_SIZE + 1);
        if(cursor) q = q.startAfter(cursor);
        return { q, searchText, kind:"model" };
      }

      let q = db.collection(COL_SUBJECT_QUESTIONS)
        .where("subjectId","==", selectedSubjectId)
        .where("type","==", mode)
        .orderBy("createdAt","desc")
        .limit(PAGE_SIZE + 1);
      if(cursor) q = q.startAfter(cursor);
      return { q, searchText, kind:"q" };
    }

    function loadPage(){
      detachPage();
      $("emptyRight").style.display = "none";
      renderSkeleton("content", 3);
      $("pager").style.display = "none";

      if(!selectedSubjectId) return;
      const built = buildQuery();

      unsubPage = built.q.onSnapshot((snap)=>{
        let docs = snap.docs;

        hasNext = docs.length > PAGE_SIZE;
        if(hasNext) docs = docs.slice(0, PAGE_SIZE);
        lastDocThisPage = docs.length ? docs[docs.length-1] : null;

        currentItems = docs.map(d => ({ id:d.id, ...d.data() }));

        if(built.searchText){
          if(built.kind === "model"){
            currentItems = currentItems.filter(it => normalize(it.title || it.name || "").includes(built.searchText));
          }else{
            currentItems = currentItems.filter(it => normalize(it.question || "").includes(built.searchText));
          }
        }

        $("rightHint").textContent =
          (mode==="mcq") ? `${selectedSubjectName || "Subject"} ‚Ä¢ MCQ ‚Ä¢ Page ${pageIndex}` :
          (mode==="written") ? `${selectedSubjectName || "Subject"} ‚Ä¢ Written ‚Ä¢ Page ${pageIndex}` :
          `${selectedSubjectName || "Subject"} ‚Ä¢ Model Tests ‚Ä¢ Page ${pageIndex}`;

        renderContent();
        if(currentItems.length) updatePager();
        else $("pager").style.display = "none";

      }, (err)=>{
        console.error(err);
        $("content").innerHTML = "";
        $("pager").style.display = "none";
        $("emptyRight").style.display = "block";
        $("emptyRight").textContent = "‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ‡•§ Firestore Index/createdAt check ‡¶ï‡¶∞‡ßÅ‡¶®‡•§";
      });
    }

    function renderContent(){
      const wrap = $("content");
      wrap.innerHTML = "";
      $("emptyRight").style.display = currentItems.length ? "none" : "block";

      if(!currentItems.length) return;

      if(mode === "model"){
        const grid = document.createElement("div");
        grid.className = "mtGrid";

        currentItems.forEach((mt)=>{
          const title = mt.title ?? mt.name ?? "Subject Model Test";
          const time = mt.totalTimeMin ?? mt.totalTime ?? mt.duration ?? mt.minutes ?? "-";
          const marks = mt.totalMarks ?? mt.totalMark ?? mt.marks ?? mt.mark ?? "-";
          const counts = mt.counts || {};
          const qCount = (Number(counts.mcq||0) + Number(counts.written||0)) || (mt.totalQuestions ?? mt.totalQ ?? mt.questionCount ?? 0);

          const card = document.createElement("div");
          card.className = "mtCard";
          card.innerHTML = `
            <h4 title="${esc(title)}">${esc(title)}</h4>
            <div class="mtMeta">
              <span>‚è± ${esc(time)} min</span>
              <span>üßÆ Mark: ${esc(marks)}</span>
              <span>üìå Q: ${esc(qCount)}</span>
            </div>
            <div class="mtActions">
              <button class="btn primary" onclick="startModelTest('${mt.id}')">Start Test</button>
              <button class="btn" onclick="openModelResult('${mt.id}')">Result</button>
            </div>
          `;
          grid.appendChild(card);
        });

        wrap.appendChild(grid);
        return;
      }

      const paper = document.createElement("div");
      paper.className = "paper";

      const list = document.createElement("div");
      list.className = "qList";

      const letters = ["A","B","C","D"];

      currentItems.forEach((it, idx)=>{
        const qno = ((pageIndex - 1) * PAGE_SIZE) + (idx + 1);
        const card = document.createElement("div");
        card.className = "qCard";

        card.innerHTML = `
          <div class="qHead">
            <span class="qNo">Q${qno}</span>
            <p class="qText">${esc(it.question || "")}</p>
          </div>
        `;

        if(mode === "mcq"){
          const opts = getOptions(it);
          const correctIndex = getCorrectIndex(it, opts);
          const chosen = selectedOptionMap.get(it.id);

          const optWrap = document.createElement("div");
          optWrap.className = "opts";

          opts.slice(0,4).forEach((op, oi)=>{
            const opt = document.createElement("div");
            opt.className = "opt";
            opt.innerHTML = `
              <span class="badge">${letters[oi]}</span>
              <div class="txt">${esc(op || "")}</div>
            `;

            if(ansMode === "show"){
              if(oi === correctIndex) opt.classList.add("correct");
              opt.style.cursor = "default";
            }else{
              opt.onclick = ()=>{
                if(selectedOptionMap.has(it.id)) return;
                selectedOptionMap.set(it.id, oi);
                renderContent();
              };
              if(chosen !== undefined){
                if(oi === correctIndex) opt.classList.add("correct");
                if(oi === chosen && chosen !== correctIndex) opt.classList.add("wrong");
                opt.style.cursor = "default";
              }
            }

            optWrap.appendChild(opt);
          });

          card.appendChild(optWrap);

          const note = (it.note ?? it.explain ?? "").toString().trim();
          if(ansMode === "show"){
            const box = document.createElement("div");
            box.className = "ansBox";
            box.innerHTML = `<b>Correct:</b> ${correctIndex>=0 ? letters[correctIndex] : "N/A"}`
              + (note ? `<br/><b>Note:</b> ${esc(note)}` : "");
            card.appendChild(box);
          }else{
            if(selectedOptionMap.has(it.id)){
              const chosenIdx = selectedOptionMap.get(it.id);
              const ok = chosenIdx === correctIndex;
              const box = document.createElement("div");
              box.className = "ansBox";
              box.innerHTML = ok
                ? `‚úÖ <b style="color:var(--ok)">Correct!</b>` + (note ? `<br/><b>Note:</b> ${esc(note)}` : "")
                : `‚ùå <b style="color:var(--danger)">Wrong!</b> Correct: <b>${correctIndex>=0 ? letters[correctIndex] : "N/A"}</b>`
                  + (note ? `<br/><b>Note:</b> ${esc(note)}` : "");
              card.appendChild(box);
            }else{
              const hidden = document.createElement("div");
              hidden.className = "ansHidden";
              hidden.textContent = "Ans Hide ON ‚Äî ‡¶Ö‡¶™‡¶∂‡¶® ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡¶≤‡ßá ‡¶∞‡ßá‡¶ú‡¶æ‡¶≤‡ßç‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá‡•§";
              card.appendChild(hidden);
            }
          }
        }

        if(mode === "written"){
          const rightAns = (it.rightAns ?? it.right_ans ?? it.answer ?? "").toString();
          const note = (it.note ?? it.explain ?? "").toString().trim();

          if(ansMode === "show"){
            const box = document.createElement("div");
            box.className = "ansBox";
            box.innerHTML = `<b>Answer:</b> ${esc(rightAns)}`
              + (note ? `<br/><b>Note:</b> ${esc(note)}` : "");
            card.appendChild(box);
          }else{
            const hidden = document.createElement("div");
            hidden.className = "ansHidden";
            hidden.textContent = "Ans Hide ON ‚Äî Answer ‡¶¶‡ßá‡¶ñ‡¶§‡ßá Ans Show ‡¶ï‡¶∞‡ßÅ‡¶®‡•§";
            card.appendChild(hidden);
          }
        }

        list.appendChild(card);

        if((idx+1) % 10 === 0 && idx < currentItems.length - 1){
          const ad = document.createElement("div");
          ad.className = "inlineAd";
          ad.innerHTML = `<div><div class="tag">Ad Slot</div><div style="font-size:12px;">‡¶è‡¶ñ‡¶æ‡¶®‡ßá AdSense/Adstra ‡¶ï‡ßã‡¶° ‡¶¨‡¶∏‡¶¨‡ßá</div></div>`;
          list.appendChild(ad);
        }
      });

      paper.appendChild(list);
      wrap.appendChild(paper);
    }

    function startModelTest(modelTestId){
      location.href = `Start-model-test.html?modelTestId=${encodeURIComponent(modelTestId)}`;
    }
    function openModelResult(modelTestId){
      location.href = `model-test-reasult.html?modelTestId=${encodeURIComponent(modelTestId)}`;
    }
    window.startModelTest=startModelTest;
    window.openModelResult=openModelResult;

    function attachSubjects(){
      if(unsubSubjects){ try{unsubSubjects();}catch(e){} unsubSubjects=null; }

      unsubSubjects = db.collection(COL_SUBJECTS).onSnapshot((snap)=>{
        SUBJECTS = snap.docs.map(d => ({ id:d.id, ...d.data() }));

        if(!selectedSubjectId && SUBJECTS.length){
          const first = SUBJECTS.slice().sort((a,b)=>(a.name||"").localeCompare(b.name||""))[0];
          selectedSubjectId = first.id;
        }

        const found = SUBJECTS.find(s=>s.id===selectedSubjectId);
        selectedSubjectName = found?.name || "";

        $("rightTitle").textContent = selectedSubjectName || "Details";
        $("headerTag").textContent = selectedSubjectName ? `‡¶∏‡¶ï‡¶≤ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶ø ‡¶π‡ßã‡¶ï ‡¶ó‡¶≠‡ßÄ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‚Ä¢ ${selectedSubjectName}` : "‡¶∏‡¶ï‡¶≤ ‡¶™‡ßç‡¶∞‡¶∏‡ßç‡¶§‡ßÅ‡¶§‡¶ø ‡¶π‡ßã‡¶ï ‡¶ó‡¶≠‡ßÄ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá";

        renderSubjectList();

        if(selectedSubjectId){
          const u = new URL(location.href);
          u.searchParams.set("subjectId", selectedSubjectId);
          history.replaceState({}, "", u.toString());
          resetAndReload(false);
        }
      }, (err)=>{
        console.error(err);
        $("leftHint").textContent = "Failed to load";
        $("sList").innerHTML = "";
        $("sEmpty").style.display = "block";
      });
    }

    // Boot
    setAnsMode("hide");
    setMode("mcq");
    renderSkeleton("content", 3);
    attachSubjects();
  </script>
</body>
</html>
